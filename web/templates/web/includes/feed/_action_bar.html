<!-- Bottom Action Bar -->
<div class="fixed bottom-0 left-0 right-0 z-40 glass-morphism pb-safe-bottom">
    <div class="flex justify-around items-center py-2 px-6">

        <!-- FIXED: Drum Button with Correct Icon Color -->
        <button @click="toggleLike($event)" x-ref="drumButton"
            class="relative flex flex-col items-center gap-0.5 group">
            <div class="relative w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300"
                :class="isLiked ? 'bg-gradient-to-br from-yellow-400 to-yellow-600' : 'bg-gray-800/50'"
                x-bind:class="{ 'drum-explosion': showDrumEffect }">

                <!-- FIXED: Icon color remains visible when active -->
                <svg class="w-7 h-7 transition-colors" :class="isLiked ? 'text-gray-900' : 'text-gray-400'"
                    fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2L4 6v4c0 2.5 1 4.5 2.5 6L12 22l5.5-6c1.5-1.5 2.5-3.5 2.5-6V6l-8-4z" />
                    <path d="M12 7v10M9 9l6 6M15 9l-6 6" stroke="currentColor" stroke-width="1.5" fill="none" />
                </svg>

                <div x-show="showDrumEffect" class="drum-ripple-enhanced"></div>

                <template x-if="showDrumEffect">
                    <div>
                        <div class="sparkle" style="top: -5px; left: 5px;"></div>
                        <div class="sparkle" style="top: 5px; right: -5px; animation-delay: 0.1s;"></div>
                        <div class="sparkle" style="bottom: -5px; left: 10px; animation-delay: 0.2s;"></div>
                        <div class="sparkle" style="bottom: 5px; right: 5px; animation-delay: 0.15s;"></div>
                    </div>
                </template>
            </div>
            <span class="text-xs font-semibold" :class="isLiked ? 'text-yellow-500' : 'text-gray-400'">Drum
                It</span>
        </button>

        <!-- Add Gist Button -->
        <button @click="openCommentModal()" class="flex flex-col items-center gap-0.5 group">
            <div
                class="w-12 h-12 rounded-full bg-gray-800/50 flex items-center justify-center group-hover:bg-yellow-500 transition-all duration-300">
                <svg class="w-6 h-6 text-gray-400 group-hover:text-black transition-colors" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
            </div>
            <span class="text-xs text-gray-400 font-semibold">Add Gist</span>
        </button>

        <!-- Share Button -->
        <button class="flex flex-col items-center gap-0.5 group">
            <div
                class="w-12 h-12 rounded-full bg-gray-800/50 flex items-center justify-center group-hover:bg-yellow-500 transition-all duration-300">
                <svg class="w-6 h-6 text-gray-400 group-hover:text-black transition-colors" fill="none"
                    stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                </svg>
            </div>
            <span class="text-xs text-gray-400 font-semibold">Share</span>
        </button>
    </div>
</div>